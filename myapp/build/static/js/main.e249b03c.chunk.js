(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(31),r=n.n(a),i=(n(37),n(38),n(7)),c=n(3),o=n.n(c),u=n(4),b=n(2),p=n(14),j=n.n(p),l=function(e){return j.a.get(e)},m=function(e,t,n){return j.a.put("".concat(e,"/").concat(t),n)},d=function(e,t){return j.a.post(e,t)},O=function(e,t){return j.a.delete("".concat(e,"/").concat(t))},v=function(e){return j.a.get(e)},f="https://mern-cinema-cinemawebserver.herokuapp.com/api/users",x="https://mern-cinema-cinemawebserver.herokuapp.com/api/premissions",h=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(x);case 2:return n=e.sent,s=n.data,a=s.filter((function(e){return e.id==t})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(f);case 2:return n=e.sent,s=n.data,a=s.filter((function(e){return e._id==t})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("https://mern-cinema-cinemawebserver.herokuapp.com/api/file/users");case 2:return t=e.sent,e.next=5,l(f);case 5:return n=e.sent,e.next=8,l(x);case 8:return s=e.sent,a=t.data.map((function(e,t){return{id:e.id,firstName:e.firstName,lastName:e.lastName,userName:n.data[t].userName,createdDate:e.createdDate,sessionTimeOut:e.sessionTimeOut,permissions:s.data[t].premissions}})),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:return e.sent,s=n,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,s,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("https://mern-cinema-cinemawebserver.herokuapp.com/api/file/users/".concat(t));case 2:return e.next=4,e.sent.data[0];case 4:return n=e.sent,s={firstName:n.firstName,lastName:n.lastName,userName:"",createdDate:n.createdDate,sessionTimeOut:n.sessionTimeOut,permissions:[]},e.next=8,h(t);case 8:return a=e.sent,e.next=11,g(t);case 11:return r=e.sent,s.userName=r[0].userName,s.permissions=a[0].premissions,e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={getUserLoginData:function(){return l(f)},updateUserLoginData:function(e,t){return m(f,e,t)},addUserLogin:function(e){return d(f,e)},getShapedUsers:S,deleteUser:function(e,t){return O(e,t)},getShapedUserById:y,getUserLoginDataById:function(e){return v("https://mern-cinema-cinemawebserver.herokuapp.com/api/users/".concat(e))},updateShapedUsers:w},C=n(6),M="https://mern-cinema-cinemawebserver.herokuapp.com/api/file/users",I=function(){return l(M)},D=function(e){return d(M,e)},N=function(e){return v("https://mern-cinema-cinemawebserver.herokuapp.com/api/file/users/".concat(e))},U=function(e,t){return m(M,e,t)},E=n(0),T=function(e){var t=Object(s.useState)(""),n=Object(b.a)(t,2),a=n[0],r=n[1],i=Object(s.useState)(""),c=Object(b.a)(i,2),p=c[0],j=c[1],l=Object(s.useState)([]),m=Object(b.a)(l,2),d=m[0],O=m[1],v=Object(s.useState)(!1),f=Object(b.a)(v,2);f[0],f[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getUserLoginData();case 2:t=e.sent,O(t.data),console.log(t.data);case 5:case"end":return e.stop()}}),e)}))),[]);console.log(sessionStorage);var x=function(){var t=Object(u.a)(o.a.mark((function t(){var n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(d),null==d.filter((function(e){return e.userName==a&&e.password==p&&""!=e.password}))[0]){t.next=14;break}return sessionStorage.setItem("userName",a),n=d.filter((function(e){return e.userName==a})),sessionStorage.setItem("userId",n[0]._id),t.next=8,N(n[0]._id);case 8:s=t.sent,console.log(6e4*s.data[0].sessionTimeOut),sessionStorage.setItem("sessionTimeOut",s.data[0].sessionTimeOut),e.history.push("/main"),t.next=15;break;case 14:alert("You Are Not A User ---\x3e Please Talk With The Admin");case 15:console.log(d);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(E.jsxs)("div",{style:{},children:[Object(E.jsx)("h2",{style:{borderBottom:"2px solid white",width:"335px"},children:"Login To Your Cinema System"})," ",Object(E.jsx)("br",{}),"User Name : ",Object(E.jsx)("input",{type:"text",placeholder:"Enter Your User Name",onChange:function(e){return r(e.target.value)}}),Object(E.jsx)("br",{}),"Password : ",Object(E.jsx)("input",{type:"password",placeholder:"Enter Your Password",onChange:function(e){return j(e.target.value)}}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Login",onClick:x})," ",Object(E.jsx)("br",{}),"New User ? : ",Object(E.jsx)(C.b,{style:{color:"unset",textDecorationColor:"#3EDBF0",textDecorationThickness:"3px"},onClick:function(){var t=d.filter((function(e){return e.userName==a}));console.log(t),null!=t[0]?(sessionStorage.setItem("userName",a),e.history.push("/createAcc/")):""!=a?alert("Your User Name Is Not In The System ---\x3ePlease Talk With The Admin"):""==a&&alert("There Is No User Name ---\x3e Please Enter Your User Name Given From The Admin")},children:" Create Account"})]})},B=function(e){var t=Object(s.useState)(sessionStorage.getItem("userName")),n=Object(b.a)(t,2),a=n[0],r=n[1],i=Object(s.useState)(""),c=Object(b.a)(i,2),p=c[0],j=c[1],l=function(){var t=Object(u.a)(o.a.mark((function t(){var n,s,r,i,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getUserLoginData();case 2:return n=t.sent,s=n.data,console.log(s),r=s.filter((function(e){return e.userName==a})),console.log(r[0]),i=r[0]._id,c={userName:a,password:p},t.next=11,k.updateUserLoginData(i,c);case 11:alert("User Created"),console.log(n.data),e.history.push("/");case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(E.jsxs)("div",{children:[Object(E.jsx)("h2",{children:"Create An Account"}),"User name : ",Object(E.jsx)("input",{type:"text",value:a,onChange:function(e){return r(e.target.value)}}),Object(E.jsx)("br",{}),"Password : ",Object(E.jsx)("input",{type:"text",placeholder:"Enter Password",onChange:function(e){return j(e.target.value)}}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Create",onClick:l})]})},_="https://mern-cinema-cinemawebserver.herokuapp.com/api/premissions",A=function(){return l(_)},V=function(e,t){return m(_,e,t)},L=function(e){return d(_,e)},F=n(5),P=function(e){var t,n=Object(i.f)(),a=Object(s.useState)(e.user),r=Object(b.a)(a,2),c=r[0],p=(r[1],function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.deleteUser("https://mern-cinema-cinemawebserver.herokuapp.com/api/users",c.id),k.deleteUser("https://mern-cinema-cinemawebserver.herokuapp.com/api/file/users",c.id),k.deleteUser("https://mern-cinema-cinemawebserver.herokuapp.com/api/premissions",c.id),e.deleteUserCard(c),n.push("/main/users/all");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return e.user.permissions&&(t=c.permissions.toString()),Object(E.jsxs)("div",{style:{border:"3px solid black",width:"500px"},children:["Name : ",c.firstName," ",c.lastName,Object(E.jsx)("br",{}),"User Name : ",c.userName,Object(E.jsx)("br",{}),"Session Time Out(Minutes) : ",c.sessionTimeOut,"  ",Object(E.jsx)("br",{}),"Created Date : ",c.createdDate,Object(E.jsx)("br",{}),"Permissions :",t," ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Edit",onClick:function(){sessionStorage.setItem("firstName",c.firstName),sessionStorage.setItem("lastName",c.lastName),n.push("/main/users/editUser/".concat(c.id))}})," ",Object(E.jsx)("input",{type:"button",value:"Delete",onClick:p})]})},J=function(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getShapedUsers();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),[]);var i=Object(F.a)(a);i.splice(0,1);var c=i.map((function(e){return Object(E.jsx)(P,{user:e,deleteUserCard:function(e){var t=a,n=t.findIndex((function(t){return t.id==e.id}));t.splice(n,1),r(t)},editUserCard:function(e){var t=a,n=t.findIndex((function(t){return t.id==e.id}));t[n]=e,r(t)}},e.id)}));return Object(E.jsxs)("div",{children:[Object(E.jsx)("h3",{children:"All Users :"}),c]})},Y=function(){var e=Object(i.f)(),t=Object(s.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)(""),p=Object(b.a)(c,2),j=p[0],l=p[1],m=Object(s.useState)(""),d=Object(b.a)(m,2),O=d[0],v=d[1],f=Object(s.useState)(""),x=Object(b.a)(f,2),h=x[0],g=x[1],S=Object(s.useState)(0),w=Object(b.a)(S,2),y=w[0],C=w[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getUserLoginData();case 2:return e.next=4,e.sent.data;case 4:e.sent;case 5:case"end":return e.stop()}}),e)}))),[]);var M=function(){var t=Object(u.a)(o.a.mark((function t(n){var s,r,i,c,u,b,p;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s={userName:h,password:""},t.next=4,k.addUserLogin(s);case 4:return r=t.sent,i=r.data._id,console.log(i),c=new Date,u=c.toLocaleDateString("en-TT"),b={id:i,firstName:j,lastName:O,createdDate:u,sessionTimeOut:y},t.next=12,D(b);case 12:return p={id:i,premissions:a},t.next=15,L(p);case 15:e.push("/main/users/all");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(e){if(e.target.checked){var t=Object(F.a)(a);t=[].concat(Object(F.a)(t),[e.target.name]),"Create Subscriptions"!=e.target.name&&"Update Subscriptions"!=e.target.name&&"Delete Subscriptions"!=e.target.name||0!=t.includes("View Subscriptions")||(t=[].concat(Object(F.a)(t),["View Subscriptions"])),"Create Movies"!=e.target.name&&"Update Movies"!=e.target.name&&"Delete Movies"!=e.target.name||0!=t.includes("View Movies")||(t=[].concat(Object(F.a)(t),["View Movies"])),r(t)}else{var n=Object(F.a)(a),s=n.findIndex((function(t){return t===e.target.name}));if(n.splice(s,1),"View Subscriptions"==e.target.name){if(n.includes("Create Subscriptions")){var i=n.findIndex((function(e){return"Create Subscriptions"==e}));n.splice(i,1)}if(n.includes("Update Subscriptions")){var c=n.findIndex((function(e){return"Update Subscriptions"==e}));n.splice(c,1)}if(n.includes("Delete Subscriptions")){var o=n.findIndex((function(e){return"Delete Subscriptions"==e}));n.splice(o,1)}}if("View Movies"==e.target.name){if(n.includes("Create Movies")){var u=n.findIndex((function(e){return"Create Movies"==e}));n.splice(u,1)}if(n.includes("Update Movies")){var b=n.findIndex((function(e){return"Update Movies"==e}));n.splice(b,1)}if(n.includes("Delete Movies")){var p=n.findIndex((function(e){return"Delete Movies"==e}));n.splice(p,1)}}r(n)}};return Object(E.jsx)("div",{children:Object(E.jsxs)("form",{onSubmit:M,children:[Object(E.jsx)("h3",{children:"Add New User "}),"First Name :",Object(E.jsx)("input",{type:"text",onChange:function(e){l(e.target.value)}})," ",Object(E.jsx)("br",{}),"Last Name : ",Object(E.jsx)("input",{type:"text",onChange:function(e){v(e.target.value)}})," ",Object(E.jsx)("br",{}),"User Name : ",Object(E.jsx)("input",{type:"text",onChange:function(e){g(e.target.value)}})," ",Object(E.jsx)("br",{}),"Session Time Out(Minutes) : ",Object(E.jsx)("input",{type:"number",onChange:function(e){C(e.target.value)}})," ",Object(E.jsx)("br",{}),"Permissions : ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"View Subscriptions",checked:a.includes("View Subscriptions"),onChange:I}),"View Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Create Subscriptions",checked:a.includes("Create Subscriptions"),onChange:I}),"Create Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Update Subscriptions",checked:a.includes("Update Subscriptions"),onChange:I}),"Update Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Delete Subscriptions",checked:a.includes("Delete Subscriptions"),onChange:I}),"Delete Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"View Movies",checked:a.includes("View Movies"),onChange:I}),"View Movies ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Create Movies",checked:a.includes("Create Movies"),onChange:I}),"Create Movies ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Update Movies",checked:a.includes("Update Movies"),onChange:I}),"Update Movies",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Delete Movies",checked:a.includes("Delete Movies"),onChange:I}),"Delete Movies ",Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"submit",value:"Save"}),Object(E.jsx)("input",{type:"button",value:"Cancel",onClick:function(){e.push("/main/users/all")}})]})})},W=function(e){var t=e.match.params.id,n=Object(i.f)(),a=Object(s.useState)({}),r=Object(b.a)(a,2),c=r[0],p=r[1],j=Object(s.useState)([]),l=Object(b.a)(j,2),m=l[0],d=l[1],O=Object(s.useState)({}),v=Object(b.a)(O,2),f=v[0],x=v[1],h=Object(s.useState)(""),g=Object(b.a)(h,2),S=(g[0],g[1]),w=Object(s.useState)(""),y=Object(b.a)(w,2),C=(y[0],y[1]),M=Object(s.useState)(sessionStorage.getItem("firstName")),I=Object(b.a)(M,2),D=I[0],N=(I[1],Object(s.useState)(sessionStorage.getItem("lastName"))),T=Object(b.a)(N,2),B=T[0],_=(T[1],Object(s.useState)("")),A=Object(b.a)(_,2),L=(A[0],A[1]),P=Object(s.useState)(0),J=Object(b.a)(P,2),Y=(J[0],J[1]);Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){var n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getShapedUserById(t);case 2:return n=e.sent,e.next=5,k.getUserLoginDataById(t);case 5:s=e.sent,p(s.data),x(n),a=n.permissions,d(a);case 10:case"end":return e.stop()}}),e)}))),[]);var W=function(e){if(e.target.checked){var t=Object(F.a)(m);t=[].concat(Object(F.a)(t),[e.target.name]),"Create Subscriptions"!=e.target.name&&"Update Subscriptions"!=e.target.name&&"Delete Subscriptions"!=e.target.name||0!=t.includes("View Subscriptions")||(t=[].concat(Object(F.a)(t),["View Subscriptions"])),"Create Movies"!=e.target.name&&"Update Movies"!=e.target.name&&"Delete Movies"!=e.target.name||0!=t.includes("View Movies")||(t=[].concat(Object(F.a)(t),["View Movies"])),d(t)}else{var n=Object(F.a)(m),s=n.findIndex((function(t){return t===e.target.name}));if(n.splice(s,1),"View Subscriptions"==e.target.name){if(n.includes("Create Subscriptions")){var a=n.findIndex((function(e){return"Create Subscriptions"==e}));n.splice(a,1)}if(n.includes("Update Subscriptions")){var r=n.findIndex((function(e){return"Update Subscriptions"==e}));n.splice(r,1)}if(n.includes("Delete Subscriptions")){var i=n.findIndex((function(e){return"Delete Subscriptions"==e}));n.splice(i,1)}}if("View Movies"==e.target.name){if(n.includes("Create Movies")){var c=n.findIndex((function(e){return"Create Movies"==e}));n.splice(c,1)}if(n.includes("Update Movies")){var o=n.findIndex((function(e){return"Update Movies"==e}));n.splice(o,1)}if(n.includes("Delete Movies")){var u=n.findIndex((function(e){return"Delete Movies"==e}));n.splice(u,1)}}d(n)}},H=function(){var e=Object(u.a)(o.a.mark((function e(){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:t,premissions:m},e.next=3,V(t,s);case 3:return e.next=5,k.updateUserLoginData(t,c);case 5:return a={id:t,firstName:f.firstName,lastName:f.lastName,createdDate:f.createdDate,sessionTimeOut:f.sessionTimeOut},e.next=8,U(t,a);case 8:sessionStorage.removeItem("firstName"),sessionStorage.removeItem("lastName"),n.push("/main/users/all");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)("div",{children:[Object(E.jsxs)("h3",{children:["Edit User :",D," ",B]}),"First Name :",Object(E.jsx)("input",{type:"text",value:f.firstName,onChange:function(e){S(e.target.value),f.firstName=e.target.value}}),Object(E.jsx)("br",{}),"Last Name : ",Object(E.jsx)("input",{type:"text",value:f.lastName,onChange:function(e){C(e.target.value),f.lastName=e.target.value}}),Object(E.jsx)("br",{}),"User Name : ",Object(E.jsx)("input",{type:"text",value:f.userName,onChange:function(e){L(e.target.value),f.userName=e.target.value,c.userName=e.target.value}}),Object(E.jsx)("br",{}),"Session Time Out(Minutes) : ",Object(E.jsx)("input",{type:"number",value:f.sessionTimeOut,onChange:function(e){Y(e.target.value),f.sessionTimeOut=e.target.value}}),Object(E.jsx)("br",{}),"Created Date : ",f.createdDate," ",Object(E.jsx)("br",{}),"Permissions :",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"View Subscriptions",checked:m.includes("View Subscriptions"),onChange:W}),"View Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Create Subscriptions",checked:m.includes("Create Subscriptions"),onChange:W}),"Create Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Update Subscriptions",checked:m.includes("Update Subscriptions"),onChange:W}),"Update Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Delete Subscriptions",checked:m.includes("Delete Subscriptions"),onChange:W}),"Delete Subscriptions ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"View Movies",checked:m.includes("View Movies"),onChange:W}),"View Movies ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Create Movies",checked:m.includes("Create Movies"),onChange:W}),"Create Movies ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Update Movies",checked:m.includes("Update Movies"),onChange:W}),"Update Movies",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"checkBox",name:"Delete Movies",checked:m.includes("Delete Movies"),onChange:W}),"Delete Movies ",Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Update",onClick:H}),Object(E.jsx)("input",{type:"button",value:"Cancel",onClick:function(){n.push("/main/users/all")}}),Object(E.jsx)("br",{})]})},H=function(e){var t,n,s=Object(i.f)();return"/main/users/all"==s.location.pathname?(t="#3EDBF0",n=null):"/main/users/add"==s.location.pathname&&(t=null,n="#3EDBF0"),Object(E.jsxs)("div",{style:{border:"3px solid black",width:"750px"},children:[Object(E.jsx)("h3",{children:"Users"}),Object(E.jsx)("input",{type:"button",style:{backgroundColor:t},value:"All Users",onClick:function(){e.history.push("/main/users/all")}}),Object(E.jsx)("input",{type:"button",style:{backgroundColor:n},value:"Add User",onClick:function(){e.history.push("/main/users/add")}}),Object(E.jsxs)(i.c,{children:[Object(E.jsx)(i.a,{path:"/main/users/all",component:J}),Object(E.jsx)(i.a,{path:"/main/users/add",component:Y}),Object(E.jsx)(i.a,{path:"/main/users/editUser/:id",component:W})]})]})},R="https://mern-cinema-subswebserver.herokuapp.com/api/Movies",G={getMoviesAllData:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l(R));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getMovieById:function(e){return v("https://mern-cinema-subswebserver.herokuapp.com/api/movies/".concat(e))},addNewMovie:function(e){return d(R,e)},updateMovie:function(e,t){return m(R,e,t)},deleteMovie:function(e){return O(R,e)}},q=function(){var e=Object(i.f)(),t=Object(s.useState)(""),n=Object(b.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)([]),p=Object(b.a)(c,2),j=p[0],l=p[1],m=Object(s.useState)(""),d=Object(b.a)(m,2),O=d[0],v=d[1],f=Object(s.useState)(""),x=Object(b.a)(f,2),h=x[0],g=x[1],S=function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:a,genres:j,image:O,premiered:h},t.next=3,G.addNewMovie(n);case 3:e.push("/main/movies/all");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(E.jsxs)("div",{children:[Object(E.jsx)("h3",{children:"Add Movie : "}),"Name : ",Object(E.jsx)("input",{type:"text",value:a,onChange:function(e){r(e.target.value)}}),Object(E.jsx)("br",{}),"Genres :",Object(E.jsx)("input",{type:"text",value:j,onChange:function(e){l(e.target.value.split(",")),console.log([j])}}),Object(E.jsx)("br",{}),"image url : ",Object(E.jsx)("input",{type:"text",value:O,onChange:function(e){v(e.target.value)}}),Object(E.jsx)("br",{}),"Premiered : ",Object(E.jsx)("input",{type:"date",value:h,onChange:function(e){g(e.target.value)}}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Save",onClick:S}),"  ",Object(E.jsx)("input",{type:"button",value:"Cancel",onClick:function(){e.push("/main/movies/all")}})]})},z=Object(s.createContext)(),K=function(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1];return Object(E.jsx)(z.Provider,{value:[a,r],children:e.children})},Q="https://mern-cinema-subswebserver.herokuapp.com/api/subscriptions",X=function(){return l(Q)},Z=function(e){return d(Q,e)},$=function(e,t){return m(Q,e,t)},ee=function(e){return O(Q,e)},te="https://mern-cinema-subswebserver.herokuapp.com/api/members",ne=function(e){return v("https://mern-cinema-subswebserver.herokuapp.com/api/members/".concat(e))},se=function(){return l(te)},ae=function(e,t){return m(te,e,t)},re=function(e){return O(te,e)},ie=function(e){return d(te,e)},ce=function(e){var t,n,a=Object(i.f)(),r=Object(s.useState)({}),c=Object(b.a)(r,2),p=c[0],j=c[1],l=Object(s.useState)([]),m=Object(b.a)(l,2),d=(m[0],m[1]),O=Object(s.useState)(JSON.parse(sessionStorage.getItem("permissions")).premissions),v=Object(b.a)(O,2),f=v[0],x=(v[1],Object(s.useState)([])),h=Object(b.a)(x,2),g=h[0],S=h[1],w=[];Object(s.useEffect)(Object(u.a)(o.a.mark((function t(){var n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:if(n=t.sent,d(n.data),void 0==e.movie){t.next=9;break}j(e.movie),n.data.forEach((function(t){t.movies.length>0&&t.movies.forEach(function(){var n=Object(u.a)(o.a.mark((function n(s){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e.movie),console.log(s),s.movieId!==e.movie._id){n.next=9;break}return console.log("hi"),n.next=6,ne(t.memberId);case 6:a=n.sent,w=[].concat(Object(F.a)(w),[{id:t.memberId,date:s.watchedDate,name:a.data.name}]),S(w);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),t.next=15;break;case 9:if(!e.match.params.id){t.next=15;break}return t.next=12,G.getMovieById(e.match.params.id);case 12:s=t.sent,j(s.data),n.data.forEach((function(t){t.movies.length>0&&t.movies.forEach(function(){var n=Object(u.a)(o.a.mark((function n(a){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e.movie),console.log(a),a.movieId!==s.data._id){n.next=9;break}return console.log("hi"),n.next=6,ne(t.memberId);case 6:r=n.sent,w=[].concat(Object(F.a)(w),[{id:t.memberId,date:a.watchedDate,name:r.data.name}]),S(w);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}));case 15:case"end":return t.stop()}}),t)}))),[]);var y,k,M=new Date(p.premiered);return f.includes("Update Movies")&&(t=Object(E.jsx)("input",{type:"button",value:"Edit",onClick:function(){sessionStorage.setItem("movie",JSON.stringify(p)),a.push("/main/movies/edit")}})),f.includes("Delete Movies")&&(n=Object(E.jsx)("input",{type:"button",value:"Delete",onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G.deleteMovie(p._id);case 2:void 0!=e.movie&&e.deleteMovieCard(p),a.push("/main/movies/all");case 4:case"end":return t.stop()}}),t)})))})),"{}"!=JSON.stringify(p)&&(y=p.genres.toString()),g.length>0&&(k=g.map((function(e){var t=new Date(e.date);return Object(E.jsxs)("li",{children:[Object(E.jsxs)(C.b,{style:{color:"unset",textDecorationColor:"#3EDBF0",textDecorationThickness:"3px"},to:"/main/subscriptions/all/".concat(e.id),children:[" ",e.name]})," , ",t.toLocaleDateString("en-TT")]},e.id)}))),Object(E.jsxs)("div",{style:{border:"3px solid black",width:"500px"},children:[Object(E.jsxs)("b",{children:[p.name," , ",M.getFullYear()]}),Object(E.jsx)("br",{}),"genres : ",y,Object(E.jsx)("div",{style:{width:"100px"},children:Object(E.jsx)("img",{src:p.image,width:"70px"})}),Object(E.jsxs)("div",{style:{border:"3px solid black",position:"relative",width:"300px",bottom:"82px",left:"90px"},children:["Subscriptions Watched",Object(E.jsx)("ul",{children:k})]}),t,n]})},oe=function(e){var t=Object(s.useState)(""),n=Object(b.a)(t,2),a=n[0],r=n[1];return Object(E.jsxs)("div",{children:["Find Movie : ",Object(E.jsx)("input",{type:"text",onChange:function(e){r(e.target.value.toLowerCase())}})," ",Object(E.jsx)("input",{type:"button",value:"Find",onClick:function(){if(a){console.log(e.movies);var t=e.movies.filter((function(e){if(e.name.toLowerCase().includes(a))return e}));console.log(t),e.updateMovies(t)}else""==a&&e.updateMovies(e.movies)}})]})},ue=function(){var e,t=Object(s.useContext)(z),n=Object(b.a)(t,2),a=(n[0],n[1],Object(s.useState)([])),r=Object(b.a)(a,2),i=r[0],c=r[1],p=Object(s.useState)([]),j=Object(b.a)(p,2),l=j[0],m=j[1],d=Object(s.useState)([]),O=Object(b.a)(d,2),v=(O[0],O[1]),f=Object(s.useState)(JSON.parse(sessionStorage.getItem("permissions")).premissions),x=Object(b.a)(f,2),h=x[0];x[1];return console.log(h),console.log(i),Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:t=e.sent,console.log(t.data),v(t.data);case 5:case"end":return e.stop()}}),e)}))),[]),Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getMoviesAllData();case 2:t=e.sent,console.log(t.data),n=t.data,m(n),c(n);case 7:case"end":return e.stop()}}),e)}))),[]),i.length>0&&(e=i.map((function(e){return Object(E.jsx)(ce,{movie:e,permissions:h,deleteMovieCard:function(e){var t=l,n=t.findIndex((function(t){return t._id==e._id}));t.splice(n,1),m(t)}},e._id)}))),Object(E.jsxs)("div",{children:[Object(E.jsx)(oe,{movies:l,updateMovies:function(e){c(e)}}),Object(E.jsx)("h3",{children:"All Movies"}),e]})},be=function(){var e=Object(i.f)(),t=Object(s.useState)(JSON.parse(sessionStorage.getItem("movie"))),n=Object(b.a)(t,2),a=n[0],r=(n[1],Object(s.useState)(a.name)),c=Object(b.a)(r,2),p=c[0],j=c[1],l=Object(s.useState)(a.genres.toString()),m=Object(b.a)(l,2),d=m[0],O=m[1],v=Object(s.useState)(a.image),f=Object(b.a)(v,2),x=f[0],h=f[1],g=Object(s.useState)(a.premiered),S=Object(b.a)(g,2),w=S[0],y=S[1],k=function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:p,genres:d,image:x,premiered:w},t.next=3,G.updateMovie(a._id,n);case 3:e.push("/main/movies/all");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=new Date(w).toLocaleDateString("fr-CA");return console.log(w),Object(E.jsxs)("div",{children:[Object(E.jsxs)("h3",{children:["Edit Movie : ",a.name," "]}),"Name : ",Object(E.jsx)("input",{type:"text",value:p,onChange:function(e){j(e.target.value)}}),Object(E.jsx)("br",{}),"Genres :",Object(E.jsx)("input",{type:"text",value:d,onChange:function(e){O(e.target.value.split(",")),console.log([d])}}),Object(E.jsx)("br",{}),"image url : ",Object(E.jsx)("input",{type:"text",value:x,onChange:function(e){h(e.target.value)}}),Object(E.jsx)("br",{}),"Premiered : ",Object(E.jsx)("input",{type:"date",value:C,onChange:function(e){y(e.target.value)}}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Update",onClick:k}),"  ",Object(E.jsx)("input",{type:"button",value:"Cancel",onClick:function(){e.push("/main/movies/all")}})]})},pe=function(){var e,t,n=Object(s.useState)(JSON.parse(sessionStorage.getItem("permissions")).premissions),a=Object(b.a)(n,2),r=a[0],c=(a[1],Object(i.f)());return console.log(c),"/main/movies/all"==c.location.pathname?(e="#3EDBF0",t=null):"/main/movies/add"==c.location.pathname&&(e=null,t="#3EDBF0"),Object(E.jsxs)("div",{style:{border:"3px solid black",width:"750px"},children:[Object(E.jsx)("h3",{children:"Movies"}),Object(E.jsx)("input",{type:"button",style:{backgroundColor:e},value:"All Movies",onClick:function(){r.includes("View Movies")?c.push("/main/movies/all"):alert("You Dont Have The Right Permission")}}),Object(E.jsx)("input",{type:"button",style:{backgroundColor:t},value:"Add Movie",onClick:function(){r.includes("Create Movies")?c.push("/main/movies/add"):alert("You Dont Have The Right Permission")}}),Object(E.jsx)(i.c,{children:Object(E.jsxs)(K,{children:[Object(E.jsx)(i.a,{path:"/main/movies/all/:id",component:ce}),Object(E.jsx)(i.a,{exact:!0,path:"/main/movies/all",component:ue}),Object(E.jsx)(i.a,{path:"/main/movies/add",component:q}),Object(E.jsx)(i.a,{path:"/main/movies/edit",component:be})]})})]})},je=Object(s.createContext)(),le=function(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1];return Object(E.jsx)(je.Provider,{value:[a,r],children:e.children})},me=function(e){var t=Object(i.f)(),n=Object(s.useState)(""),a=Object(b.a)(n,2),r=a[0],c=a[1],p=Object(s.useState)("Select Movie"),j=Object(b.a)(p,2),l=j[0],m=j[1],d=Object(s.useState)([]),O=Object(b.a)(d,2),v=O[0],f=O[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function t(){var n,s,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G.getMoviesAllData();case 2:n=t.sent,s=n.data,a=[],s.forEach((function(t){0==e.moviesWatched.filter((function(e){return t._id.includes(e.id)})).length&&(a=[].concat(Object(F.a)(a),[t]))})),f(a);case 7:case"end":return t.stop()}}),t)}))),[]);var x=function(){var n=Object(u.a)(o.a.mark((function n(){var s,a,i,c,u,b;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Select Movie"==l){n.next=15;break}return s=v.filter((function(e){return e.name==l})),a=s[0]._id,i=[].concat(Object(F.a)(e.moviesWatched),[{id:a,movieName:s[0].name,date:r}]),(c=e.subscriptions.filter((function(t){return t.memberId==e.member._id})))[0].movies=[].concat(Object(F.a)(c[0].movies),[{movieId:a,watchedDate:r}]),u={memberId:e.member._id,movies:c[0].movies},n.next=9,$(c[0]._id,u);case 9:b=v.findIndex((function(e){return e.name==l})),v.splice(b,1),f(v),e.updateMoviesWathced(i),m("Select Movie"),t.push("/main/subscriptions/all");case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),h=v.map((function(e){return Object(E.jsx)("option",{children:e.name},e.id)}));return Object(E.jsxs)("div",{style:{border:"4px solid #3EDBF0",width:"300px"},children:["Add A New Movie ",Object(E.jsx)("br",{}),Object(E.jsxs)("select",{onChange:function(e){m(e.target.value)},value:l,children:[Object(E.jsx)("option",{children:"Select Movie"}),h]}),Object(E.jsx)("input",{type:"date",onChange:function(e){return c(e.target.value)}}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Subscribe",onClick:x})]})},de=function(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),a=(n[0],n[1]),r=Object(s.useState)([]),i=Object(b.a)(r,2),c=i[0],p=i[1],j=Object(s.useState)([]),l=Object(b.a)(j,2),m=l[0],d=l[1],O=Object(s.useState)(!1),v=Object(b.a)(O,2),f=v[0],x=v[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function t(){var n,s,r,i,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:return t.next=4,t.sent.data;case 4:return n=t.sent,p(n),t.next=8,G.getMoviesAllData();case 8:s=t.sent,a(s.data),(r=n.filter((function(t){return t.memberId==e.member._id}))).length>0&&(i=[],r[0].movies.forEach((function(e){i=[].concat(Object(F.a)(i),[{movieId:e.movieId,watchedDate:e.watchedDate}])})),c=[],i.forEach((function(e){var t=s.data.findIndex((function(t){return t._id==e.movieId}));-1!==t&&(c=[].concat(Object(F.a)(c),[{id:e.movieId,movieName:s.data[t].name,date:e.watchedDate}]))})),d(c));case 12:case"end":return t.stop()}}),t)}))),[]);var h,g;return h=f?Object(E.jsx)(me,{updateMoviesWathced:function(e){d(e)},moviesWatched:m,subscriptions:c,member:e.member},e.member._id):null,m&&(g=m.map((function(e,t){var n=new Date(e.date);return Object(E.jsxs)("li",{children:[Object(E.jsx)(C.b,{style:{color:"unset",textDecorationColor:"#3EDBF0",textDecorationThickness:"3px"},to:"/main/movies/all/".concat(e.id),children:e.movieName})," , ",n.toLocaleDateString("en-TT")]},t)}))),Object(E.jsxs)("div",{style:{border:"3px solid black",width:"400px"},children:[Object(E.jsx)("b",{children:"Movies Watched"}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Subscribe to new movie",onClick:function(){x(!f)}}),h,Object(E.jsx)("ul",{children:g})]})},Oe=function(e){var t,n,a,r=Object(i.f)(),c=Object(s.useState)([]),p=Object(b.a)(c,2),j=p[0],l=p[1],m=Object(s.useState)(JSON.parse(sessionStorage.getItem("permissions")).premissions),d=Object(b.a)(m,2),O=d[0],v=(d[1],Object(s.useState)({})),f=Object(b.a)(v,2),x=f[0],h=f[1];return Object(s.useEffect)(Object(u.a)(o.a.mark((function t(){var n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X();case 2:if(n=t.sent,l(n.data),void 0==e.member){t.next=8;break}h(e.member),t.next=13;break;case 8:if(!e.match.params.id){t.next=13;break}return t.next=11,ne(e.match.params.id);case 11:s=t.sent,h(s.data);case 13:case"end":return t.stop()}}),t)}))),[]),O.includes("Update Subscriptions")&&(t=Object(E.jsx)("input",{type:"button",value:"Edit",onClick:function(){r.push("/main/subscriptions/edit/".concat(x._id)),sessionStorage.setItem("member",JSON.stringify(x))}})),O.includes("Delete Subscriptions")&&(n=Object(E.jsx)("input",{type:"button",value:"Delete",onClick:Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=j.filter((function(e){return e.memberId==x._id})),t.next=3,ee(n[0]._id);case 3:return t.next=5,re(x._id);case 5:void 0!=e.member&&e.deleteMember(x),r.push("/main/subscriptions/all");case 7:case"end":return t.stop()}}),t)})))})),"{}"!=JSON.stringify(x)&&(a=Object(E.jsx)(de,{member:x})),Object(E.jsxs)("div",{style:{border:"3px solid black",width:"500px"},children:[Object(E.jsx)("h3",{children:x.name}),"Email : ",x.email,Object(E.jsx)("br",{}),"City : ",x.city,Object(E.jsx)("br",{}),t,n,a]})},ve=function(e){var t=Object(s.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],i=Object(s.useContext)(je),c=Object(b.a)(i,2),p=c[0],j=c[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return t=e.sent,e.next=5,se();case 5:n=e.sent,j(t.data),r(n.data);case 8:case"end":return e.stop()}}),e)}))),[]);var l,m=a.filter((function(e){var t=p.findIndex((function(t){return t.memberId==e._id}));return a[t]}));return m&&(l=m.map((function(e){return Object(E.jsx)(Oe,{subscriptions:p,member:e,deleteMember:function(e){var t=a,n=t.findIndex((function(t){return t._id==e._id}));t.splice(n,1),r(t)}},e._id)}))),Object(E.jsx)("div",{children:l})},fe=function(){var e=Object(i.f)(),t=Object(s.useState)(""),n=Object(b.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)(""),p=Object(b.a)(c,2),j=p[0],l=p[1],m=Object(s.useState)(""),d=Object(b.a)(m,2),O=d[0],v=d[1],f=function(){var t=Object(u.a)(o.a.mark((function t(){var n,s,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:a,email:j,city:O},t.next=3,ie(n);case 3:return s=t.sent,r=s.data._id,i={memberId:r,movies:[]},t.next=8,Z(i);case 8:e.push("/main/subscriptions/all");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(E.jsxs)("div",{children:[Object(E.jsx)("h3",{children:"Add New Member"}),"Name : ",Object(E.jsx)("input",{type:"text",onChange:function(e){return r(e.target.value)}}),Object(E.jsx)("br",{}),"Email : ",Object(E.jsx)("input",{type:"text",onChange:function(e){return l(e.target.value)}}),Object(E.jsx)("br",{}),"City : ",Object(E.jsx)("input",{type:"text",onChange:function(e){return v(e.target.value)}}),Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Save",onClick:f}),Object(E.jsx)("input",{type:"button",value:"Cancel",onClick:function(){e.push("/main/subscriptions/all")}})]})},xe=function(e){var t=Object(s.useState)(JSON.parse(sessionStorage.getItem("member"))),n=Object(b.a)(t,2),a=n[0],r=(n[1],Object(i.f)()),c=Object(s.useState)(a.name),p=Object(b.a)(c,2),j=p[0],l=p[1],m=Object(s.useState)(a.email),d=Object(b.a)(m,2),O=d[0],v=d[1],f=Object(s.useState)(a.city),x=Object(b.a)(f,2),h=x[0],g=x[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),[]);var S=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:j,email:O,city:h},e.next=3,ae(a._id,t);case 3:sessionStorage.removeItem("member"),r.push("/main/subscriptions/all");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)("div",{children:[Object(E.jsxs)("h3",{children:["Edit Member : ",a.name]}),"Name : ",Object(E.jsx)("input",{type:"text",value:j,onChange:function(e){return l(e.target.value)}})," ",Object(E.jsx)("br",{}),"Email : ",Object(E.jsx)("input",{type:"text",value:O,onChange:function(e){return v(e.target.value)}})," ",Object(E.jsx)("br",{}),"City : ",Object(E.jsx)("input",{type:"text",value:h,onChange:function(e){return g(e.target.value)}})," ",Object(E.jsx)("br",{}),Object(E.jsx)("input",{type:"button",value:"Update",onClick:S}),Object(E.jsx)("input",{type:"button",value:"Cancel",onClick:function(){sessionStorage.removeItem("member"),r.push("/main/subscriptions/all")}})]})},he=function(){var e,t,n=Object(i.f)(),a=Object(s.useState)(JSON.parse(sessionStorage.getItem("permissions")).premissions),r=Object(b.a)(a,2),c=r[0];r[1];return"/main/subscriptions/all"==n.location.pathname?(e="#3EDBF0",t=null):"/main/subscriptions/add"==n.location.pathname&&(e=null,t="#3EDBF0"),Object(E.jsxs)("div",{style:{border:"3px solid black",width:"750px"},children:[Object(E.jsx)("h2",{children:"Subscriptions"}),Object(E.jsx)("input",{type:"button",style:{backgroundColor:e},value:"All Members",onClick:function(){c.includes("View Subscriptions")?n.push("/main/subscriptions/all"):alert("You Dont Have The Right Permission")}}),Object(E.jsx)("input",{type:"button",style:{backgroundColor:t},value:"Add Member",onClick:function(){c.includes("Create Subscriptions")?n.push("/main/subscriptions/add"):alert("You Dont Have The Right Permission")}}),Object(E.jsx)(i.c,{children:Object(E.jsxs)(le,{children:[Object(E.jsx)(i.a,{exact:!0,path:"/main/subscriptions/all",component:ve}),Object(E.jsx)(i.a,{path:"/main/subscriptions/add",component:fe}),Object(E.jsx)(i.a,{path:"/main/subscriptions/edit/:id",component:xe}),Object(E.jsx)(i.a,{path:"/main/subscriptions/all/:id",component:Oe})]})})]})},ge=function(e){var t=Object(i.f)(),n=Object(s.useState)(""),a=Object(b.a)(n,2),r=a[0],c=a[1],p=Object(s.useState)(sessionStorage.getItem("userId")),j=Object(b.a)(p,2),l=j[0],m=(j[1],Object(s.useState)(sessionStorage.getItem("userName"))),d=Object(b.a)(m,2),O=d[0],v=(d[1],Object(s.useState)([])),f=Object(b.a)(v,2),x=(f[0],f[1]),h=Object(s.useState)([]),g=Object(b.a)(h,2),S=g[0],w=g[1],y=Object(s.useState)(!1),k=Object(b.a)(y,2),C=k[0],M=k[1],D=Object(s.useState)(!1),N=Object(b.a)(D,2),U=N[0],T=N[1],B=Object(s.useState)(!1),_=Object(b.a)(B,2),V=_[0],L=_[1],F=Object(s.useState)(!1),P=Object(b.a)(F,2),J=P[0],Y=P[1];Object(s.useEffect)(Object(u.a)(o.a.mark((function t(){var n,s,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I();case 2:return n=t.sent,x(n.data),t.next=6,A();case 6:s=t.sent,w(s.data),M("Admin"==O),a=sessionStorage.getItem("sessionTimeOut"),r=setTimeout((function(){sessionStorage.removeItem("userName"),sessionStorage.removeItem("permissions"),sessionStorage.removeItem("userId"),sessionStorage.removeItem("movie"),sessionStorage.removeItem("movieName"),sessionStorage.removeItem("member"),sessionStorage.removeItem("sessionTimeOut"),e.history.push("/"),alert("Your Time In The System Expired")}),6e4*a),c(r);case 12:case"end":return t.stop()}}),t)}))),[]);var W,R,G,q;U||"/main/movies/all"==t.location.pathname||"/main/movies/add"==t.location.pathname||"/main/movies/edit"==t.location.pathname?(W="#3EDBF0",R=null,G=null):V||"/main/subscriptions/all"==t.location.pathname||"/main/subscriptions/add"==t.location.pathname||"/main/subscriptions/edit"==t.location.pathname?(W=null,R="#3EDBF0",G=null):J&&(W=null,R=null,G="#3EDBF0"),q=C?Object(E.jsx)("input",{style:{backgroundColor:G},type:"button",value:"Users Management",onClick:function(){e.history.push("/main/users/all"),T(!1),Y(!0),L(!1)}}):null;var z=S.filter((function(e){return e.id==l}));return sessionStorage.setItem("permissions",JSON.stringify(z[0])),Object(E.jsxs)("div",{children:[Object(E.jsxs)("h4",{children:["Hello ",O," "]}),Object(E.jsx)("input",{style:{backgroundColor:W},type:"button",value:"Movies",onClick:function(){var t=S.findIndex((function(e){return e.id==l}));S[t].premissions.includes("View Movies")?(e.history.push("/main/movies/all"),T(!0),Y(!1),L(!1)):alert("You Dont Have The Right Permission To See Movies")}}),Object(E.jsx)("input",{style:{backgroundColor:R},type:"button",value:"Subscriptions",onClick:function(){e.history.push("/main/subscriptions/all"),T(!1),Y(!1),L(!0)}}),q,Object(E.jsx)("input",{type:"button",value:"Log Out",onClick:function(){e.history.push("/"),sessionStorage.removeItem("userName"),sessionStorage.removeItem("permissions"),sessionStorage.removeItem("userId"),sessionStorage.removeItem("member"),sessionStorage.removeItem("movieName"),sessionStorage.removeItem("movie"),sessionStorage.removeItem("sessionTimeOut"),clearTimeout(r)}})," ",Object(E.jsx)("br",{}),Object(E.jsxs)(i.c,{children:[Object(E.jsx)(i.a,{path:"/main/users/",component:H}),Object(E.jsx)(i.a,{path:"/main/movies/",component:pe}),Object(E.jsx)(i.a,{path:"/main/subscriptions",component:he})]})]})},Se=function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{style:{borderBottom:"4px solid white",width:"472px"},children:" Movies - Subsciptions Web Site"}),Object(E.jsxs)(i.c,{children:[Object(E.jsx)(i.a,{exact:!0,path:"/",component:T}),Object(E.jsx)(i.a,{path:"/createAcc",component:B}),Object(E.jsx)(i.a,{path:"/main",component:ge})]})]})},we=function(){return Object(E.jsx)("div",{className:"app",children:Object(E.jsx)(Se,{})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),r(e),i(e)}))};r.a.render(Object(E.jsx)(C.a,{children:Object(E.jsx)(we,{})}),document.getElementById("root")),ye()}},[[64,1,2]]]);
//# sourceMappingURL=main.e249b03c.chunk.js.map